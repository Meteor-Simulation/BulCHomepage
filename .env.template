# ============================================================================
# BulC Homepage - 환경 변수 설정
# ============================================================================
# 이 파일을 .env로 복사하여 값을 수정하세요.
# 주의: .env 파일은 절대 Git에 커밋하지 마세요!
# ============================================================================

# ============================================================================
# 1. 공통 설정 (Database, Server, JWT)
# ============================================================================

# --- Database (PostgreSQL) ---
DB_HOST=localhost
DB_PORT=5432
DB_NAME=bulc_homepage_db
DB_USER=postgres
DB_PASSWORD=<your_db_password>

# --- Server Ports ---
BACKEND_PORT=8080
FRONTEND_PORT=3000
NGINX_PORT=3000
SERVER_URL=http://localhost

# --- JWT Authentication ---
# JWT_SECRET: 최소 64자 이상 권장 (openssl rand -base64 64)
JWT_SECRET=<your_jwt_secret_min_64_chars>
# Access Token 만료 (밀리초): 10분 = 600000
JWT_ACCESS_EXPIRATION=600000
# Refresh Token 만료 (밀리초): 7일 = 604800000
JWT_REFRESH_EXPIRATION=604800000

# ============================================================================
# 2. Web Module (OAuth, Email)
# ============================================================================

# --- OAuth2 소셜 로그인 ---
# 네이버 로그인 (https://developers.naver.com/apps)
NAVER_CLIENT_ID=<your_naver_client_id>
NAVER_CLIENT_SECRET=<your_naver_client_secret>

# OAuth2 리다이렉트 URI (프론트엔드 콜백)
OAUTH2_REDIRECT_URI=http://localhost:3000/oauth/callback

# --- Microsoft Graph API (이메일 발송) ---
# Azure AD 앱 등록 (https://portal.azure.com)
MS_TENANT_ID=<your_azure_tenant_id>
MS_CLIENT_ID=<your_azure_client_id>
MS_CLIENT_SECRET=<your_azure_client_secret>

# 발신 이메일 주소
MAIL_FROM=no-reply@msimul.com
MAIL_FROM_ACCOUNTS=accounts@msimul.com
MAIL_FROM_BILLING=billing@msimul.com
MAIL_REPLY_TO=support@msimul.com

# ============================================================================
# 3. Licensing Module (RS256 토큰, 세션 관리)
# ============================================================================

# --- RS256 키 (sessionToken / offlineToken) ---
# 키 생성:
#   openssl genpkey -algorithm RSA -out secrets/session_token_private_key.pem -pkeyopt rsa_keygen_bits:2048
#   openssl rsa -pubout -in secrets/session_token_private_key.pem -out secrets/session_token_public_key.pem
#
# 방법1 (권장): Base64 인코딩된 PEM 문자열 (우선순위 높음)
#   base64 -w0 secrets/session_token_private_key.pem 으로 생성
# LIC_PRIVATE_KEY_BASE64=
#
# 방법2: 파일 경로 (BASE64 미설정 시 사용)
#   Docker/K8s: LIC_PRIVATE_KEY_PATH=/run/secrets/session_token_private_key.pem

LIC_PRIVATE_KEY_PATH=./secrets/session_token_private_key.pem
LIC_PUBLIC_KEY_PATH=./secrets/session_token_public_key.pem

# --- 토큰 설정 ---
LIC_TOKEN_TTL_MINUTES=15
LIC_TOKEN_ISSUER=bulc-license-server

# --- 세션 관리 ---
# Stale 세션 판정 임계값 (분) - Auto-Resolve용
LIC_STALE_THRESHOLD_MINUTES=30
